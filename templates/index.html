{% extends "base.html" %}
{% block title %}Beranda - SMA Medina Bandung{% endblock %}
{% block content %}

<div class="hero">
    <div class="hero-slider">
        {% if banners %}{% for banner in banners %}
        <div class="slide {% if loop.first %}active{% endif %}">
            <img src="{{ banner.image_url if banner.image_url else url_for('static',filename='images/sch-pic1.jpg') }}" class="slide-img" alt="{{ banner.judul }}">
        </div>
        {% endfor %}{% else %}
        <div class="slide active">
            <img src="{{ url_for('static',filename='images/sch-pic1.jpg') }}" class="slide-img" alt="SMA Medina">
        </div>
        {% endif %}
        <div class="hero-content">
            <h1>Selamat Datang di SMA Medina Bandung</h1>
            <p>Mencetak Generasi Berakhlak Mulia, Berprestasi, dan Berwawasan Global</p>
            <a href="{{ url_for('site.visi_misi') }}" class="hero-cta">Pelajari Lebih Lanjut</a>
        </div>
        <div class="slider-controls" id="sliderDots"></div>
    </div>
</div>

<section class="intro">
    <div class="container">
        <div class="intro-wrap">
            <div class="intro-text">
                <h2>Pendidikan Berkualitas <span>Berbasis Nilai Islam</span></h2>
                <p>SMA Medina Bandung telah berdiri sejak 1985 dan terus berkomitmen memberikan pendidikan yang mengintegrasikan ilmu pengetahuan modern dengan nilai-nilai keislaman yang kuat.</p>
                <p>Kami fokus pada pengembangan karakter siswa melalui pembelajaran inovatif, kegiatan ekstrakurikuler beragam, dan pembinaan akhlak berkelanjutan.</p>
                <a href="{{ url_for('site.visi_misi') }}" class="intro-link">Pelajari Visi & Misi Kami <i class="fas fa-arrow-right"></i></a>
            </div>
            <div class="stats-grid">
                <div class="stat-card"><div class="stat-num">{{ sekolah_info.jumlah_siswa if sekolah_info else '720' }}</div><div class="stat-label">SISWA AKTIF</div></div>
                <div class="stat-card"><div class="stat-num">{{ sekolah_info.jumlah_guru if sekolah_info else '58' }}</div><div class="stat-label">GURU PROFESIONAL</div></div>
                <div class="stat-card"><div class="stat-num">{{ sekolah_info.jumlah_kelas if sekolah_info else '24' }}</div><div class="stat-label">RUANG KELAS</div></div>
                <div class="stat-card"><div class="stat-num">A</div><div class="stat-label">AKREDITASI</div></div>
            </div>
        </div>
    </div>
</section>

{% if berita %}
<section class="section section-dark">
    <div class="container">
        <div class="section-title"><h2>Berita Terkini</h2></div>
        <div class="news-grid">
            {% for item in berita %}
            <div class="news-item">
                <div class="news-thumb"><i class="fas fa-newspaper"></i></div>
                <div class="news-body">
                    <div class="news-meta"><i class="fas fa-calendar"></i> {{ item.tanggal.strftime('%d %B %Y') if item.tanggal is defined and item.tanggal.strftime else item.tanggal }}</div>
                    <h3 class="news-title"><a href="{{ url_for('site.berita_detail',berita_id=item.id) }}">{{ item.judul }}</a></h3>
                    <p class="news-excerpt">{{ item.ringkasan }}</p>
                </div>
            </div>
            {% endfor %}
        </div>
        <div style="text-align:center;margin-top:50px"><a href="{{ url_for('site.berita_terbaru') }}" class="hero-cta">Lihat Semua Berita</a></div>
    </div>
</section>
{% endif %}

<section class="prestasi-section" id="prestasi">
    <div class="container">
        <div class="section-title"><h2>Prestasi Terbaru</h2></div>
        {% if prestasi %}
        <div class="prestasi-table-wrap">
            <table class="prestasi-table">
                <thead>
                    <tr>
                        <th><i class="fas fa-trophy prestasi-icon"></i>Nama Prestasi</th>
                        <th><i class="fas fa-layer-group prestasi-icon"></i>Skala</th>
                        <th><i class="fas fa-calendar prestasi-icon"></i>Tanggal</th>
                        <th><i class="fas fa-building prestasi-icon"></i>Penyelenggara</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in prestasi %}
                    <tr>
                        <td><strong>{{ item.nama_prestasi }}</strong></td>
                        <td><span class="prestasi-badge">{{ item.skala }}</span></td>
                        <td>{{ item.tanggal }}</td>
                        <td>{{ item.penyelenggara }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% else %}
        <div class="empty-state"><div class="empty-icon"><i class="fas fa-trophy"></i></div><p class="empty-text">Belum ada data prestasi saat ini</p></div>
        {% endif %}
    </div>
</section>

<section class="alumni-section" id="profil-alumni">
    <div class="container">
        <div class="section-title"><h2>Profil Alumni</h2></div>
        {% if alumni %}
        <div class="alumni-grid">
            {% for item in alumni %}
            <div class="alumni-card">
                <div class="alumni-header">
                    <div class="alumni-avatar">{{ item.nama[0] if item.nama else 'A' }}</div>
                    <div class="alumni-info">
                        <h4>{{ item.nama }}</h4>
                        <div class="alumni-status">{{ item.status_saat_ini }}</div>
                        <div class="alumni-graduation"><i class="fas fa-graduation-cap"></i> Alumni SMA Medina</div>
                    </div>
                </div>
                <p class="alumni-quote">{{ item.testimoni }}</p>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <div class="empty-state"><div class="empty-icon"><i class="fas fa-user-graduate"></i></div><p class="empty-text">Belum ada testimoni alumni saat ini</p></div>
        {% endif %}
    </div>
</section>

<section class="contact" id="kontak">
    <div class="container">
        <div class="section-title"><h2 style="color:#fff">Hubungi Kami</h2></div>
        <div class="contact-grid">
            <div><div class="contact-icon"><i class="fas fa-map-marker-alt"></i></div><h4 class="contact-title">Alamat</h4><p class="contact-info">{{ sekolah_info.alamat if sekolah_info and sekolah_info.alamat else 'Jl. KH. Ahmad Dahlan / Banteng No. 13-15, Burangrang, Kec. Lengkong, Kota Bandung' }}</p></div>
            <div><div class="contact-icon"><i class="fas fa-phone"></i></div><h4 class="contact-title">Telepon</h4><p class="contact-info">{{ sekolah_info.telepon if sekolah_info and sekolah_info.telepon else '(022) 7322207' }}</p></div>
            <div><div class="contact-icon"><i class="fas fa-envelope"></i></div><h4 class="contact-title">Email</h4><p class="contact-info">{{ sekolah_info.email if sekolah_info and sekolah_info.email else 'smamedinabdg@gmail.com' }}</p></div>
        </div>
    </div>
</section>

<section class="cta">
    <div class="container">
        <h3>Tertarik Bergabung dengan SMA Medina?</h3>
        <p>Daftarkan putra-putri Anda dan bergabunglah dengan keluarga besar SMA Medina Bandung</p>
        <a href="{{ url_for('site.info_sekolah') }}" class="cta-btn">Informasi Pendaftaran</a>
    </div>
</section>

<script>
var slideIndex=0;var slides=document.querySelectorAll('.slide');var autoTimer;
function showSlide(){slides.forEach(function(s){s.classList.remove('active')});var dots=document.querySelectorAll('.slide-dot');dots.forEach(function(d){d.classList.remove('active')});slides[slideIndex].classList.add('active');if(dots[slideIndex])dots[slideIndex].classList.add('active')}
function nextSlide(){slideIndex++;if(slideIndex>=slides.length)slideIndex=0;showSlide()}
function startAuto(){autoTimer=setInterval(nextSlide,5000)}
var dotsContainer=document.getElementById('sliderDots');
for(var i=0;i<slides.length;i++){(function(idx){var dot=document.createElement('div');dot.className='slide-dot';if(idx===0)dot.classList.add('active');dot.onclick=function(){clearInterval(autoTimer);slideIndex=idx;showSlide();startAuto()};dotsContainer.appendChild(dot)})(i)}
startAuto();document.querySelector('.hero').addEventListener('mouseenter',function(){clearInterval(autoTimer)});document.querySelector('.hero').addEventListener('mouseleave',startAuto);
</script>
{% endblock %}
